"use strict";(self.webpackChunkreact_virtual_sortable=self.webpackChunkreact_virtual_sortable||[]).push([[206],{62206:function(_t,Y,h){h.r(Y),h.d(Y,{default:function(){return nt}});var Me=h(9783),p=h.n(Me),Ne=h(19632),K=h.n(Ne),He=h(97857),m=h.n(He),Le=h(5574),P=h.n(Le),d=h(67294),je=h(12444),X=h.n(je),Ve=h(72004),G=h.n(Ve),We=h(26867),T=h.n(We);function J(n,r){var e,t=function(){for(var i=this,a=arguments.length,u=new Array(a),S=0;S<a;S++)u[S]=arguments[S];e||(r<=0?n.apply(this,u):e=setTimeout(function(){e=null,n.apply(i,u)},r))};return t.cancel=function(){e&&(clearTimeout(e),e=null)},t}function U(n,r){var e=J(n,r),t=function(){e.cancel(),e.apply(this,arguments)};return t.cancel=function(){e.cancel()},t}function M(n,r){return n==r}function Q(n,r){return(Array.isArray(r)?r:r.replace(/\[/g,".").replace(/\]/g,".").split(".")).reduce(function(e,t){return(e||{})[t]},n)}function Z(n){return n instanceof Document&&n.nodeType===9||n instanceof Window}var N=["delay","group","handle","lockAxis","disabled","sortable","draggable","animation","autoScroll","ghostClass","ghostStyle","chosenClass","scrollSpeed","fallbackOnBody","scrollThreshold","delayOnTouchOnly","placeholderClass"],Ye=function(){function n(r,e){X()(this,n),p()(this,"el",void 0),p()(this,"options",void 0),p()(this,"sortable",void 0),p()(this,"rangeChanged",void 0),this.el=r,this.options=e,this.rangeChanged=!1,this.installSortable()}return G()(n,[{key:"destroy",value:function(){this.sortable.destroy(),this.rangeChanged=!1}},{key:"option",value:function(e,t){this.options[e]=t,N.includes(e)&&this.sortable.option(e,t)}},{key:"installSortable",value:function(){var e=this,t=N.reduce(function(o,i){return o[i]=e.options[i],o},{});this.sortable=new(T())(this.el,m()(m()({},t),{},{emptyInsertThreshold:0,swapOnDrop:function(i){return i.from===i.to},removeCloneOnDrop:function(i){return i.from===i.to},onDrag:function(i){return e.onDrag(i)},onDrop:function(i){return e.onDrop(i)},onChoose:function(i){return e.onChoose(i)},onUnchoose:function(i){return e.onUnchoose(i)}}))}},{key:"onChoose",value:function(e){this.dispatchEvent("onChoose",e)}},{key:"onUnchoose",value:function(e){this.dispatchEvent("onUnchoose",e)}},{key:"onDrag",value:function(e){var t=e.node.getAttribute("data-key"),o=this.getIndex(t),i=this.options.list[o],a=this.options.uniqueKeys[o];this.sortable.option("store",{item:i,key:a,index:o}),this.dispatchEvent("onDrag",{item:i,key:a,index:o,event:e})}},{key:"onDrop",value:function(e){var t,o=(t=T().get(e.from))===null||t===void 0?void 0:t.option("store"),i=o.item,a=o.key,u=o.index,S=this.options.list,y={key:a,item:i,list:S,event:e,changed:!1,oldList:K()(S),oldIndex:u,newIndex:u};if(e.from===e.to&&e.node===e.target||this.handleDropEvent(e,y,u),this.dispatchEvent("onDrop",y),e.from===this.el&&this.rangeChanged){var z;(z=T().dragged)===null||z===void 0||z.remove()}if(e.from!==e.to){var b;(b=T().clone)===null||b===void 0||b.remove()}this.rangeChanged=!1}},{key:"handleDropEvent",value:function(e,t,o){var i=e.target.getAttribute("data-key"),a=-1,u=o;e.from===e.to?(u=this.getIndex(t.key),a=this.getIndex(i),(u<a&&e.relative===-1||u>a&&e.relative===1)&&(a+=e.relative),a!==u&&(t.list.splice(u,1),t.list.splice(a,0,t.item))):(e.from===this.el&&(u=this.getIndex(t.key),t.list.splice(u,1)),e.to===this.el&&(u=-1,a=this.getIndex(i),e.relative===0?a=t.list.length:e.relative===1&&(a+=e.relative),t.list.splice(a,0,t.item))),t.changed=e.from!==e.to||a!==u,t.oldIndex=u,t.newIndex=a}},{key:"getIndex",value:function(e){if(e==null)return-1;for(var t=this.options.uniqueKeys,o=0,i=t.length;o<i;o++)if(M(t[o],e))return o;return-1}},{key:"dispatchEvent",value:function(e,t){var o=this.options[e];o&&o(t)}}]),n}(),Pe=["size","keeps","scroller","direction","debounceTime","throttleTime"],Xe=function(){function n(r){X()(this,n),p()(this,"sizes",void 0),p()(this,"range",void 0),p()(this,"offset",void 0),p()(this,"options",void 0),p()(this,"scrollEl",void 0),p()(this,"direction",void 0),p()(this,"sizeType",void 0),p()(this,"fixedSize",void 0),p()(this,"averageSize",void 0),p()(this,"onScroll",void 0),this.options=r;var e={size:0,keeps:0,buffer:0,wrapper:null,scroller:null,direction:"vertical",uniqueKeys:[],debounceTime:null,throttleTime:null};for(var t in e)!(t in this.options)&&(this.options[t]=e[t]);this.sizes=new Map,this.sizeType="INIT",this.fixedSize=0,this.averageSize=0,this.range={start:0,end:0,front:0,behind:0},this.offset=0,this.direction="STATIONARY",this.updateScrollElement(),this.updateOnScrollFunction(),this.addScrollEventListener(),this.checkIfUpdate(0,r.keeps-1)}return G()(n,[{key:"isFixed",value:function(){return this.sizeType==="FIXED"}},{key:"isFront",value:function(){return this.direction==="FRONT"}},{key:"isBehind",value:function(){return this.direction==="BEHIND"}},{key:"isHorizontal",value:function(){return this.options.direction==="horizontal"}},{key:"getSize",value:function(e){return this.sizes.get(e)||this.getItemSize()}},{key:"getOffset",value:function(){var e=this.isHorizontal()?"scrollLeft":"scrollTop";return this.scrollEl[e]}},{key:"getScrollSize",value:function(){var e=this.isHorizontal()?"scrollWidth":"scrollHeight";return this.scrollEl[e]}},{key:"getClientSize",value:function(){var e=this.isHorizontal()?"offsetWidth":"offsetHeight";return this.scrollEl[e]}},{key:"scrollToOffset",value:function(e){var t=this.isHorizontal()?"scrollLeft":"scrollTop";this.scrollEl[t]=e}},{key:"scrollToIndex",value:function(e){if(e>=this.options.uniqueKeys.length-1)this.scrollToBottom();else{var t=this.getOffsetByRange(0,e),o=this.getScrollStartOffset();this.scrollToOffset(t+o)}}},{key:"scrollToBottom",value:function(){var e=this,t=this.getScrollSize();this.scrollToOffset(t),setTimeout(function(){var o=e.getClientSize(),i=e.getScrollSize(),a=e.getOffset();a+o+1<i&&e.scrollToBottom()},5)}},{key:"option",value:function(e,t){var o=this,i=this.options[e];this.options[e]=t,e==="uniqueKeys"&&this.sizes.forEach(function(a,u){t.includes(u)||o.sizes.delete(u)}),e==="scroller"&&(i&&T().utils.off(i,"scroll",this.onScroll),this.updateScrollElement(),this.addScrollEventListener())}},{key:"updateRange",value:function(e){if(e){this.handleUpdate(e.start);return}var t=this.range.start;t=Math.max(t,0),this.handleUpdate(t)}},{key:"onItemResized",value:function(e,t){!t||this.sizes.get(e)===t||(this.sizes.set(e,t),this.sizeType==="INIT"?(this.sizeType="FIXED",this.fixedSize=t):this.isFixed()&&this.fixedSize!==t&&(this.sizeType="DYNAMIC",this.fixedSize=0),!this.averageSize&&this.sizeType==="DYNAMIC"&&this.sizes.size===this.options.keeps&&this.updateAverageSize())}},{key:"updateAverageSize",value:function(){var e=K()(this.sizes.values()).reduce(function(t,o){return t+o},0);this.averageSize=Math.round(e/this.sizes.size)}},{key:"addScrollEventListener",value:function(){this.options.scroller&&T().utils.on(this.options.scroller,"scroll",this.onScroll)}},{key:"removeScrollEventListener",value:function(){this.options.scroller&&T().utils.off(this.options.scroller,"scroll",this.onScroll)}},{key:"enableScroll",value:function(e){var t=this.options.scroller,o=e?T().utils.off:T().utils.on,i="onwheel"in document.createElement("div")?"wheel":"mousewheel";o(t,"DOMMouseScroll",this.preventDefault),o(t,i,this.preventDefault),o(t,"touchmove",this.preventDefault),o(t,"keydown",this.preventDefaultForKeyDown)}},{key:"preventDefault",value:function(e){e.preventDefault()}},{key:"preventDefaultForKeyDown",value:function(e){var t={37:1,38:1,39:1,40:1};if(t[e.keyCode])return this.preventDefault(e),!1}},{key:"updateScrollElement",value:function(){var e=this.options.scroller;if(Z(e)){var t=document.scrollingElement||document.documentElement||document.body;this.scrollEl=t}else this.scrollEl=e}},{key:"updateOnScrollFunction",value:function(){var e=this,t=this.options,o=t.debounceTime,i=t.throttleTime;o?this.onScroll=U(function(){return e.handleScroll()},o):i?this.onScroll=J(function(){return e.handleScroll()},i):this.onScroll=function(){return e.handleScroll()}}},{key:"handleScroll",value:function(){var e=this.getOffset(),t=this.getClientSize(),o=this.getScrollSize();e===this.offset?this.direction="STATIONARY":this.direction=e<this.offset?"FRONT":"BEHIND",this.offset=e;var i=this.isFront()&&e<=0,a=this.isBehind()&&t+e+1>=o;this.options.onScroll({top:i,bottom:a,offset:e,direction:this.direction}),this.isFront()?this.handleScrollFront():this.isBehind()&&this.handleScrollBehind()}},{key:"handleScrollFront",value:function(){var e=this.getScrollItems();if(!(e>=this.range.start)){var t=Math.max(e-this.options.buffer,0);this.checkIfUpdate(t,this.getEndByStart(t))}}},{key:"handleScrollBehind",value:function(){var e=this.getScrollItems();e<this.range.start+this.options.buffer||this.checkIfUpdate(e,this.getEndByStart(e))}},{key:"getScrollItems",value:function(){var e=this.offset-this.getScrollStartOffset();if(e<=0)return 0;if(this.isFixed())return Math.floor(e/this.fixedSize);for(var t=0,o=this.options.uniqueKeys.length,i=0,a=0;t<=o;){if(i=t+Math.floor((o-t)/2),a=this.getOffsetByRange(0,i),a===e)return i;a<e?t=i+1:a>e&&(o=i-1)}return t>0?--t:0}},{key:"checkIfUpdate",value:function(e,t){var o=this.options.keeps,i=this.options.uniqueKeys.length;i<=o?e=0:t-e<o-1&&(e=t-o+1),this.range.start!==e&&this.handleUpdate(e)}},{key:"handleUpdate",value:function(e){this.range.start=e,this.range.end=this.getEndByStart(e),this.range.front=this.getFrontOffset(),this.range.behind=this.getBehindOffset(),this.options.onUpdate(m()({},this.range))}},{key:"getFrontOffset",value:function(){return this.isFixed()?this.fixedSize*this.range.start:this.getOffsetByRange(0,this.range.start)}},{key:"getBehindOffset",value:function(){var e=this.range.end,t=this.getLastIndex();return this.isFixed()?(t-e)*this.fixedSize:(t-e)*this.getItemSize()}},{key:"getOffsetByRange",value:function(e,t){if(e>=t)return 0;for(var o=0,i=e;i<t;i++){var a=this.sizes.get(this.options.uniqueKeys[i]);o=o+(typeof a=="number"?a:this.getItemSize())}return o}},{key:"getEndByStart",value:function(e){return Math.min(e+this.options.keeps-1,this.getLastIndex())}},{key:"getLastIndex",value:function(){var e=this.options,t=e.uniqueKeys,o=e.keeps;return t.length>0?t.length-1:o-1}},{key:"getItemSize",value:function(){return this.isFixed()?this.fixedSize:this.options.size||this.averageSize}},{key:"getScrollStartOffset",value:function(){var e=this.options,t=e.wrapper,o=e.scroller;if(o===t)return 0;var i=0;if(o&&t){var a=this.isHorizontal()?"left":"top",u=Z(o)?T().utils.getRect(t):T().utils.getRect(t,!0,o);i=this.offset+u[a]}return i}}]),n}(),Ge=h(52677),Je=h.n(Ge);function Qe(n){var r=n.dataKey,e=n.sizeKey,t=n.dragging,o=n.chosenKey,i=n.children,a=n.onSizeChange,u=d.useRef(null);d.useLayoutEffect(function(){var y;if((typeof ResizeObserver=="undefined"?"undefined":Je()(ResizeObserver))!==void 0){var z;y=new ResizeObserver(function(){var b=u.current[e];a(r,b)}),u.current&&((z=y)===null||z===void 0||z.observe(u.current))}return function(){y&&(y.disconnect(),y=null)}},[u]);var S=d.useMemo(function(){var y=i.props.style||{},z=M(r,o);return t&&z?Object.assign(y,{display:"none"}):y},[o,t]);return d.cloneElement(i,{"data-key":r,role:"item",ref:u,style:S,className:i.props.className})}var Ze=d.memo(Qe),H=h(85893);function qe(n){var r=n.list,e=n.start,t=n.end,o=n.dataKey,i=n.sizeKey,a=n.dragging,u=n.chosenKey,S=n.children,y=n.onSizeChange;return r.slice(e,t+1).map(function(z,b){var R=e+b,x=Q(z,o);return(0,H.jsx)(Ze,{dataKey:x,sizeKey:i,dragging:a,chosenKey:u,onSizeChange:y,children:typeof S=="function"?S(z,R,x):S},x)})}var _e=qe;function et(n,r){d.useEffect(r,Object.values(n))}var q=et,D={drag:"onDrag",drop:"onDrop",top:"onTop",bottom:"onBottom"};function tt(n,r){var e=n.dataKey,t=e===void 0?"":e,o=n.dataSource,i=o===void 0?[]:o,a=n.tableMode,u=a===void 0?!1:a,S=n.wrapTag,y=S===void 0?"div":S,z=n.rootTag,b=z===void 0?"div":z,R=n.style,x=R===void 0?{}:R,_=n.className,ot=_===void 0?"":_,ee=n.wrapStyle,te=ee===void 0?{}:ee,ne=n.wrapClass,it=ne===void 0?"":ne,oe=n.size,rt=oe===void 0?void 0:oe,ie=n.keeps,I=ie===void 0?30:ie,re=n.scroller,$=re===void 0?void 0:re,le=n.direction,B=le===void 0?"vertical":le,se=n.debounceTime,lt=se===void 0?0:se,ae=n.throttleTime,st=ae===void 0?0:ae,ue=n.delay,at=ue===void 0?0:ue,ce=n.group,ut=ce===void 0?"":ce,fe=n.handle,ct=fe===void 0?"":fe,de=n.lockAxis,ft=de===void 0?void 0:de,he=n.disabled,dt=he===void 0?!1:he,ve=n.sortable,ge=ve===void 0?!0:ve,ye=n.draggable,ht=ye===void 0?'[role="item"]':ye,Se=n.animation,vt=Se===void 0?150:Se,pe=n.autoScroll,gt=pe===void 0?!0:pe,me=n.scrollSpeed,yt=me===void 0?{x:10,y:10}:me,ze=n.ghostClass,St=ze===void 0?"":ze,Te=n.ghostStyle,pt=Te===void 0?void 0:Te,be=n.chosenClass,mt=be===void 0?"":be,Ce=n.placeholderClass,zt=Ce===void 0?"":Ce,Oe=n.fallbackOnBody,Tt=Oe===void 0?!1:Oe,xe=n.scrollThreshold,bt=xe===void 0?55:xe,ke=n.delayOnTouchOnly,Ct=ke===void 0?!1:ke,Ot=d.useState({start:0,end:I-1,front:0,behind:0}),Ie=P()(Ot,2),C=Ie[0],xt=Ie[1],w=d.useRef(!1),F=d.useRef(""),k=d.useRef([]),L=d.useRef(),Ee=d.useRef(),kt=function(l){return v.current.getSize(l)},Ke=function(){return v.current.getOffset()},De=function(){return v.current.getClientSize()},Re=function(){return v.current.getScrollSize()},$e=function(l){var c;(c=v.current)===null||c===void 0||c.scrollToOffset(l)},It=function(l){var c;(c=v.current)===null||c===void 0||c.scrollToIndex(l)},Et=function(l){var c=k.current.indexOf(l);if(c>-1){var f;(f=v.current)===null||f===void 0||f.scrollToIndex(c)}},Kt=function(){$e(0)},Dt=function(){var l;(l=v.current)===null||l===void 0||l.scrollToBottom()};d.useImperativeHandle(r,function(){return{getSize:kt,getOffset:Ke,getClientSize:De,getScrollSize:Re,scrollToTop:Kt,scrollToKey:Et,scrollToIndex:It,scrollToOffset:$e,scrollToBottom:Dt}}),d.useEffect(function(){return Ft(),Ht(),function(){var s,l;(s=v.current)===null||s===void 0||s.removeScrollEventListener(),(l=O.current)===null||l===void 0||l.destroy()}},[]);var A=d.useRef(!1),v=d.useRef(),Be={size:rt,keeps:I,scroller:$,direction:B,debounceTime:lt,throttleTime:st},Rt=U(function(){var s;A.current=!0,(s=n[D.top])===null||s===void 0||s.call(n)},50),$t=U(function(){var s;(s=n[D.bottom])===null||s===void 0||s.call(n)},50),Bt=function(l){A.current=!1,l.top?Rt():l.bottom&&$t()},wt=function(l){xt(function(c){return O.current&&w.current&&l.start!==c.start&&(O.current.rangeChanged=!0),l})},Ft=function(){v.current=new Xe(m()(m()({},Be),{},{buffer:Math.round(I/3),wrapper:Ee.current,scroller:$||L.current,uniqueKeys:k.current,onScroll:Bt,onUpdate:wt}))};q(Be,function(){Pe.forEach(function(s){if(n[s]!==void 0){var l;(l=v.current)===null||l===void 0||l.option(s,n[s])}})});var j=d.useRef(0);d.useEffect(function(){if(j.current&&A.current&&n.keepOffset){var s=Math.abs(i.length-j.current);if(s>0){var l;(l=v.current)===null||l===void 0||l.scrollToIndex(s)}A.current=!1}j.current=i.length},[i]);var O=d.useRef(),we={delay:at,group:ut,handle:ct,lockAxis:ft,disabled:dt,sortable:ge,draggable:ht,animation:vt,autoScroll:gt,ghostClass:St,ghostStyle:pt,chosenClass:mt,scrollSpeed:yt,fallbackOnBody:Tt,scrollThreshold:bt,delayOnTouchOnly:Ct,placeholderClass:zt},At=function(l){F.current=l.node.getAttribute("data-key")},Ut=function(){F.current=""},Mt=function(l){var c;if(w.current=!0,!ge){var f,g;(f=v.current)===null||f===void 0||f.enableScroll(!1),(g=O.current)===null||g===void 0||g.option("autoScroll",!1)}(c=n[D.drag])===null||c===void 0||c.call(n,l)},Nt=function(l){var c,f,g;w.current=!1,(c=v.current)===null||c===void 0||c.enableScroll(!0),(f=O.current)===null||f===void 0||f.option("autoScroll",n.autoScroll);var E=m()(m()({},l),{},{list:K()(l.list)});(g=n[D.drop])===null||g===void 0||g.call(n,E)},Ht=function(){O.current=new Ye(L.current,m()(m()({},we),{},{list:i,uniqueKeys:k.current,onDrag:Mt,onDrop:Nt,onChoose:At,onUnchoose:Ut}))};q(we,function(){N.forEach(function(s){if(n[s]!==void 0){var l;(l=O.current)===null||l===void 0||l.option(s,n[s])}})});var Fe=d.useRef([]);d.useEffect(function(){var s;Lt(),jt(Fe.current,i),Fe.current=i,(s=O.current)===null||s===void 0||s.option("list",i)},[i]);var Lt=function(){var l,c;k.current=i.map(function(f){return Q(f,t)}),(l=v.current)===null||l===void 0||l.option("uniqueKeys",k.current),(c=O.current)===null||c===void 0||c.option("uniqueKeys",k.current)},jt=function(l,c){var f;if(!(!l.length&&!c.length)&&l.length!==c.length){var g=m()({},C);l.length>I&&c.length>l.length&&g.end===l.length-1&&Vt()&&g.start++,(f=v.current)===null||f===void 0||f.updateRange(g)}},Vt=function(){var l=Ke(),c=De(),f=Re();return l+c+1>=f},Wt=function(l,c){var f,g;if(!M(l,F.current)){var E=(f=v.current)===null||f===void 0?void 0:f.sizes.size,W=Math.min(I,i.length);(g=v.current)===null||g===void 0||g.onItemResized(l,c),E===W-1&&v.current.updateRange(m()({},C))}},V=d.useMemo(function(){var s=C.front,l=C.behind,c=B!=="vertical",f=c?"auto hidden":"hidden auto",g=c?"0px ".concat(l,"px 0px ").concat(s,"px"):"".concat(s,"px 0px ").concat(l,"px"),E=m()(m()({},x),{},{overflow:u||$?"":f}),W=m()(m()({},te),{},{padding:u?"":g}),qt=c?"offsetWidth":"offsetHeight";return{containerStyle:E,wrapperStyle:W,itemSizeKey:qt}},[C,x,te,$,u,B]),Yt=V.containerStyle,Pt=V.wrapperStyle,Xt=V.itemSizeKey,Gt=d.useMemo(function(){var s=u?"table":y,l=u?"tbody":y;return[s,l]},[b,y,u]),Ae=P()(Gt,2),Jt=Ae[0],Qt=Ae[1],Zt=_e({list:i,start:C.start,end:C.end,dataKey:t,sizeKey:Xt,children:n.children,dragging:w.current,chosenKey:F.current,onSizeChange:Wt}),Ue=function(l,c){var f=B==="vertical"?"height":"width",g=p()({padding:0,border:0},f,"".concat(l,"px"));return(0,H.jsx)("tr",{children:(0,H.jsx)("td",{style:g})},c)};return d.createElement(Jt,{ref:L,style:Yt,className:ot},[n.header,d.createElement(Qt,{ref:Ee,key:"virtual-table-wrap",style:Pt,className:it},[u&&Ue(C.front,"virtual-table-front")].concat(K()(Zt),[u&&Ue(C.behind,"virtual-table-behind")])),n.footer])}var nt=d.forwardRef(tt)}}]);
